@(
	formAdd: Form[_],
	graph: com.lucidchart.open.nark.models.records.Graph
)(
	implicit
	request: com.lucidchart.open.nark.request.AppRequest[_],
	user: com.lucidchart.open.nark.models.records.User
)
@import com.lucidchart.open.nark.controllers.{routes=>narkRoutes}
@import com.lucidchart.open.nark.views
@import com.lucidchart.open.nark.views.html.helpers
@import helper.twitterBootstrap._
@import helper._

@com.lucidchart.open.nark.views.html.layouts.main("Create Target", userOption = Some(user), scripts = List("graphite-metric-search.js", "d3/d3.v3.min.js", "nv.d3.min.js", "moment.min.js", "dashboard.js"), styles = List("nv.d3.css")) {
	<style type="text/css">
		#target-input { width: 100%; }
	</style>

	<h3>Add a new target to graph @graph.name for dashboard <a href="@narkRoutes.DashboardsController.dashboard(graph.dashboard.url)">@graph.dashboard.name</a></h3>
	<br>
	@helper.form(action=narkRoutes.TargetsController.addSubmit(graph.id)) {
		<fieldset>
			@helpers.csrfHiddenInput()
			@helper.inputText(formAdd("target"), 'id -> "target-input", 'class -> "input-xlarge", 'placeholder -> "Graphite Target", '_label -> "Target", 'required -> true, '_showConstraints -> false)
			<p class="help-block">
				Eg. stats.counters.servers.com.lucidchart.mt.eiger.mongod.27018.insert.count<br />
				OR stats.counters.servers.{REVERSE_HOSTNAME}.mongod.27018.insert.count<br />
				OR stats.gauges.application.*.logins
			</p>
			<button id="add" class="btn btn-primary">Create</button>
		</fieldset>
	}
	<h4>Graph Preview Below (If Available)</h4>
	<style>
		#target-graph svg {
		height: 400px;
		}
	</style>

	<div id="target-graph">
		<svg></svg>
	</div>
	<br>
}
